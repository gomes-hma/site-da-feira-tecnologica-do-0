<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O SINAL: Experiência Interativa C.A.S.</title>
    <link rel="shortcut icon" href="imgs/favicon.png" type="image/x-icon">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Emblema+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Buenard:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap"rel="stylesheet">
    <link rel="stylesheet" href="CssExterno/site-da-feira-tecnologica-do-0/style.css">
    <link rel="stylesheet" href="bootstrap-5.3.8-dist\css\bootstrap.css">

    <style>
        :root {
            /* Cores do seu tema */
            --bg: #fffdf6;
            --lilac-1: #9599E6;
            /* Cor de Força / EM */
            --lilac-2: #A7A9ED;
            --lilac-3: #C1C3F6;
            /* Cor de Alívio / Botão Coragem */
            --title: #9c9be7;
            /* Títulos */
            --text-dark: #333547;
            --text-darker: #23252F;
            /* Fundo Escuro */
            --color-danger: #e65555;
            /* Cor de Risco / Alerta */
        }

        /* Base e Tipografia do Jogo */
        #game-container * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Buenard', serif;
        }

        .titulo {
            font-family: "Emblema One", system-ui;
            color: var(--title);
            font-size: 2em;
            margin-bottom: 20px;
        }

        /* Container Principal do Jogo */
        #game-container {
            width: 90%;
            max-width: 500px;
            padding: 30px;
            background: rgba(45, 45, 60, 0.9);
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            text-align: center;
            /* Centraliza o container dentro do areaJogo */
            margin: 50px auto;
            color: var(--bg);
        }

        /* Tela de Início e Botões do Jogo */
        #start-screen,
        #result-screen {
            padding: 20px 0;
        }

        #game-container button {
            background-color: var(--title);
            color: var(--text-darker);
            border: none;
            padding: 12px 25px;
            margin-top: 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: background-color 0.2s ease, transform 0.1s ease;
        }

        #game-container button:hover {
            background-color: var(--lilac-1);
            transform: translateY(-2px);
        }

        /* Indicador de Tempo */
        #countdown {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--lilac-3);
            margin-bottom: 20px;
        }

        /* Estilo das Barras de Recurso */
        .resource-bar-container {
            text-align: left;
            margin-bottom: 15px;
        }

        .resource-bar-container label {
            font-size: 0.9em;
            color: var(--lilac-3);
        }

        .bar-outer {
            height: 25px;
            background-color: var(--text-dark);
            border-radius: 12px;
            overflow: hidden;
            margin-top: 5px;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.5);
        }

        .bar-inner {
            height: 100%;
            transition: width 0.3s ease-out, background-color 0.5s ease;
        }

        /* Cores Iniciais das Barras */
        #em-bar {
            background-color: var(--lilac-1);
            /* Energia Mental: Lilás */
        }

        #de-bar {
            background-color: var(--color-danger);
            /* Dívida Emocional: Vermelho-Alerta */
        }

        /* Área de Evento/Notificação */
        .event-card {
            background-color: var(--text-dark);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        #event-text {
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .options {
            display: flex;
            justify-content: space-around;
            gap: 10px;
        }

        .options button {
            flex-grow: 1;
            margin: 0;
            font-size: 1em;
        }

        .sacrifice-btn {
            background-color: var(--text-dark);
            /* Fica mais escuro */
            border: 1px solid var(--lilac-2);
            color: var(--lilac-2);
        }

        .sacrifice-btn:hover {
            background-color: var(--text-darker);
        }

        .courage-btn {
            background-color: var(--lilac-3);
            /* Cor de alívio */
            color: var(--text-darker);
        }

        .courage-btn:hover {
            background-color: var(--lilac-1);
        }

        /* Efeito de Ruído (Quando Dívida é Alta) */
        /* O efeito de shake no body foi removido do estilo do jogo,
           pois pode afetar a página inteira, mas o efeito de cor do fundo do body.overload
           pode ser re-aplicado a #game-container, se o estilo original do site permitir.
           Vou manter a lógica 'overload' no JS, mas a classe CSS para o body será ignorada aqui.
        */

        /* Tela de Resultado */
        .result-card {
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        #result-message {
            font-size: 1.1em;
            color: var(--lilac-3);
        }

        .cta-area {
            margin: 20px 0;
        }

        .cta-link {
            color: var(--lilac-1);
            text-decoration: none;
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
        }

        .cvv-disclaimer {
            font-size: 0.8em;
            color: var(--color-danger);
        }

        /* Utilitário */
        .hidden {
            display: none !important;
        }
    </style>
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg fixed-top" style="position: sticky; top: 0;">
          <div class="container">
            <a class="navbar-brand" href="#">CAS</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
              aria-controls="navbarNav" aria-expanded="false" aria-label="Alternar navegação">
              <span class="navbar-toggler-icon"></span>
            </button>
      
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
              <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="index.html">Início</a></li>
                <li class="nav-item"><a class="nav-link" href="aprofundamento.html">Aprofundamento</a></li>
                <li class="nav-item"><a class="nav-link" href="Jogo.html">Jogo</a></li>
                <li class="nav-item"><a class="nav-link" href="rename.html">Conscientização</a></li>
                <li class="nav-item"><a class="nav-link" href="timeline.html">Linha do Tempo</a></li>
                <li class="nav-item"><a class="nav-link" href="contato.html">Contato</a></li>
              </ul>
            </div>
          </div>
        </nav>
      </header>
    <main>
        <section class="banner img-fluid img-responsive" id="home"><img class="banner img-fluid img-responsive" src="imgs/BannerCAS.png" alt=""></section>
        <div class="areaJogo">
            <div id="game-container">
                <div id="start-screen">
                    <h1 class="titulo">O SINAL: O Despertar</h1>
                    <p>Você tem 45 segundos para navegar por um dia de sobrecarga. Suas escolhas refletem o
                        **Ciclo Silencioso**. Comece a notar os sinais. Você é o jogador e o paciente.</p>
                    <button id="start-btn">INICIAR O SINAL</button>
                </div>

                <div id="gameplay-screen" class="hidden">
                    <div id="countdown">Tempo: 45s</div>

                    <div class="resource-bar-container">
                        <label>Energia Mental (EM)</label>
                        <div class="bar-outer">
                            <div id="em-bar" class="bar-inner"></div>
                        </div>
                    </div>
                    <div class="resource-bar-container">
                        <label>Dívida Emocional (DE)</label>
                        <div class="bar-outer debt-outer">
                            <div id="de-bar" class="bar-inner debt-inner"></div>
                        </div>
                    </div>

                    <div id="event-area" class="event-card hidden">
                        <p id="event-text">Aguardando evento...</p>
                        <div class="options">
                            <button id="opt1-btn" class="sacrifice-btn"></button>
                            <button id="opt2-btn" class="courage-btn"></button>
                        </div>
                    </div>
                </div>

                <div id="result-screen" class="hidden result-card">
                    <h1 id="result-title" class="titulo"></h1>
                    <p id="result-message"></p>
                    <div class="cta-area">
                        <a href="Jogo.html" class="cta-link">Saiba como quebrar o Ciclo na seção Jogo/Conscientização do
                            site.</a>
                        <p class="cvv-disclaimer">Lembrete: Isso é uma simulação. Se precisar de ajuda, ligue CVV 188.
                        </p>
                    </div>
                    <button id="restart-btn">JOGAR NOVAMENTE</button>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <div>
            <h4>CAS</h4>
            <p>Um projeto desenvolvido para a Feira Tecnológica, promovendo reflexão e empatia.</p>
        </div>
        <div>
            <h4>Navegação</h4>
            <ul>
                <li><a href="#inicio">Início</a></li>
                <li><a href="#tema">Tema</a></li>
                <li><a href="#jogo">Jogo</a></li>
                <li><a href="#contato">Contato</a></li>
            </ul>
        </div>
        <div>
            <h4>Projeto</h4>
            <ul>
                <li>Desenvolvido por alunos do curso técnico</li>
                <li>Inspirado na temática da autodestruição silenciosa</li>
            </ul>
        </div>
        <div>
            <h4>Integrantes</h4>
            <ul>
                <li>Arthur Franco</li>
                <li>Arthur Gomes</li>
                <li>Arthur Pereira</li>
                <li>Bruno Ferreira</li>
                <li>João Pedro</li>
            </ul>
        </div>
    </footer>

    <div class="copyright">
        © 2025 - Projeto C.A.S. | Todos os direitos reservados.
    </div>

    <script>
        // Detectar scroll e mudar o header
        const header = document.getElementById('header');
        const banner = document.querySelector('.banner');

        window.addEventListener('scroll', function () {
            const bannerHeight = banner.offsetHeight;
            const scrollPosition = window.scrollY;

            // Quando passar do banner, adiciona a classe 'scrolled'
            if (scrollPosition > bannerHeight - 100) {
                header.classList.remove('transparent');
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
                header.classList.add('transparent');
            }
        });
    </script>

    <script>
    const EM_MAX = 100;
    const DE_MAX = 100; // Limite para o estado de "Sobrecarga"

    let energiaMental = EM_MAX;
    let dividaEmocional = 0;
    let tempoRestante = 45;
    let coragemScore = 0; // Contador de escolhas positivas
    let gameInterval;
    let eventInterval;
    let gameRunning = false;

    // Elementos do DOM
    const $body = document.body;
    const $startScreen = document.getElementById('start-screen');
    const $gameplayScreen = document.getElementById('gameplay-screen');
    const $resultScreen = document.getElementById('result-screen');
    const $startBtn = document.getElementById('start-btn');
    const $restartBtn = document.getElementById('restart-btn');
    const $countdown = document.getElementById('countdown');
    const $emBar = document.getElementById('em-bar');
    const $deBar = document.getElementById('de-bar');
    const $eventArea = document.getElementById('event-area');
    const $eventText = document.getElementById('event-text');
    const $opt1Btn = document.getElementById('opt1-btn');
    const $opt2Btn = document.getElementById('opt2-btn');
    const $resultTitle = document.getElementById('result-title');
    const $resultMessage = document.getElementById('result-message');
    const $gameContainer = document.getElementById('game-container');


    // --- LISTA DE EVENTOS DO CICLO (FASE 1) ---
    // Descrições de efeito foram removidas para forçar a reflexão!
    const events = [
        {
            text: "E-mail do chefe: 'Prazo adiantado para a noite. Urgente.'",
            opt1Label: "Virar a noite e entregar.",
            opt1Effect: { em: -15, de: +30, coragem: 0 },
            opt2Label: "Mandar um limite: 'Entrego amanhã cedo.'",
            opt2Effect: { em: +10, de: -10, coragem: 1 }
        },
        {
            text: "Amigo (Zap): 'Preciso desabafar urgente, estou mal.'",
            opt1Label: "Ajudar imediatamente, ignorando sua exaustão.",
            opt1Effect: { em: -10, de: +20, coragem: 0 },
            opt2Label: "Mandar: 'Te ligo amanhã, tô no limite'.",
            opt2Effect: { em: +5, de: -5, coragem: 1 }
        },
        {
            text: "Pensamento: 'Estou sempre cansado. Sou fraco.'",
            opt1Label: "Reprimir: 'Preciso ser produtivo'.",
            opt1Effect: { em: -20, de: +30, coragem: 0 },
            opt2Label: "Validar: 'É normal sentir isso. Vou descansar.'",
            opt2Effect: { em: +15, de: -15, coragem: 1 }
        },
        {
            text: "Alarme: Hora de caminhar/exercitar. Você está esgotado.",
            opt1Label: "Ficar na mesa: 'Não tenho tempo'.",
            opt1Effect: { em: -5, de: +15, coragem: 0 },
            opt2Label: "Levantar e dar uma volta curta.",
            opt2Effect: { em: +10, de: -5, coragem: 1 }
        },
        {
            text: "Interação: Você erra um detalhe importante e sente vergonha.",
            opt1Label: "Esconder o erro e tentar consertar sozinho.",
            opt1Effect: { em: -10, de: +15, coragem: 0 },
            opt2Label: "Comunicar o erro para reduzir o estresse.",
            opt2Effect: { em: +10, de: -10, coragem: 1 }
        },
        {
            text: "Sinal Final: Sua mente grita: 'Preciso parar. Preciso de ajuda.'",
            opt1Label: "Vou aguentar mais um dia.",
            opt1Effect: { em: -35, de: +50, coragem: 0 },
            opt2Label: "Eu mereço ajuda. Vou falar com alguém.",
            opt2Effect: { em: +40, de: -50, coragem: 1 }
        }
    ];
    let eventsPool = [];

    // --- FUNÇÕES DE LÓGICA (FASE 1) ---

    function updateBars() {
        energiaMental = Math.max(0, Math.min(EM_MAX, energiaMental));
        dividaEmocional = Math.max(0, Math.min(DE_MAX, dividaEmocional));

        $emBar.style.width = `${energiaMental}%`;
        $deBar.style.width = `${dividaEmocional}%`;

        if (dividaEmocional > 70) {
            $gameContainer.classList.add('overload');
            $body.classList.add('overload');
        } else {
            $gameContainer.classList.remove('overload');
            $body.classList.remove('overload');
        }

        if (energiaMental <= 0) {
            endGame();
        }
    }

    function handleChoice(effect) {
        if (!gameRunning) return;

        let emChange = effect.em;
        let deChange = effect.de;

        // Penalidade de Ruído
        if (dividaEmocional > 70 && emChange < 0) {
            emChange *= 2;
        }

        energiaMental += emChange;
        dividaEmocional += deChange;
        coragemScore += effect.coragem; // Contabiliza o score

        updateBars();
        $eventArea.classList.add('hidden');
        
        // Só carrega um novo evento se o tempo não tiver acabado
        if (tempoRestante > 0) {
             loadNewEvent();
        }
    }

    function loadNewEvent() {
        if (eventsPool.length === 0) {
            eventsPool = [...events];
        }

        let eventIndex;
        // Lógica para forçar o "Sinal Final"
        if (tempoRestante <= 15 || dividaEmocional > 70) {
            const finalEventIndex = eventsPool.findIndex(e => e.text.includes('Sinal Final'));
            if (finalEventIndex !== -1) {
                eventIndex = finalEventIndex;
            } else {
                eventIndex = Math.floor(Math.random() * eventsPool.length);
            }
        } else {
            // Sorteia um evento que não seja o final
            const nonFinalEvents = eventsPool.filter(e => !e.text.includes('Sinal Final'));
            if (nonFinalEvents.length > 0) {
                eventIndex = eventsPool.findIndex(e => e === nonFinalEvents[Math.floor(Math.random() * nonFinalEvents.length)]);
            } else {
                eventIndex = 0;
            }
        }
        
        if (eventIndex === -1 && eventsPool.length > 0) {
            eventIndex = Math.floor(Math.random() * eventsPool.length);
        }

        const event = eventsPool.splice(eventIndex, 1)[0];

        $eventText.textContent = event.text;
        $opt1Btn.textContent = event.opt1Label;
        $opt2Btn.textContent = event.opt2Label;

        $opt1Btn.onclick = () => handleChoice(event.opt1Effect);
        $opt2Btn.onclick = () => handleChoice(event.opt2Effect);

        $eventArea.classList.remove('hidden');
    }

    function startGame() {
        // Reset de estado
        energiaMental = EM_MAX;
        dividaEmocional = 0;
        tempoRestante = 45;
        coragemScore = 0;
        gameRunning = true;
        eventsPool = [...events];

        // Reset de visual
        $startScreen.classList.add('hidden');
        $resultScreen.classList.add('hidden');
        $gameplayScreen.classList.remove('hidden');
        $body.classList.remove('overload');
        $gameContainer.classList.remove('overload');
        $eventArea.classList.add('hidden');

        updateBars();
        loadNewEvent();

        // Início do Timer do Jogo
        gameInterval = setInterval(() => {
            tempoRestante--;
            $countdown.textContent = `Tempo: ${tempoRestante}s`;

            if (tempoRestante <= 0) {
                clearInterval(gameInterval);
                clearInterval(eventInterval);
                showPhase2Screen(); // Transição para a Fase 2
            }
        }, 1000);

        // Início do Timer dos Eventos (Apenas para garantir que o evento não suma sem clique)
        eventInterval = setInterval(() => {
            if ($eventArea.classList.contains('hidden') && gameRunning && tempoRestante > 0) {
                loadNewEvent();
            }
        }, 6000);
    }

    function endGame() {
        // Chamado quando EM chega a 0
        gameRunning = false;
        clearInterval(gameInterval);
        clearInterval(eventInterval);

        // Resultado imediato de COLAPSO
        showResultScreen("COLAPSO: VOCÊ QUEBROU.", 
            "Você viu o peso de ignorar os sinais. Essa simulação pode ser sua realidade. A autodestruição silenciosa não tem Game Over. A busca por ajuda é o seu reset.", 
            false); // Não mostra a Fase 2 após o colapso
    }
    
    // --- LÓGICA DA FASE 2: O SINAL NO OUTRO ---

    const phase2Events = [
        {
            text: "Um amigo te evita e parece exausto há semanas. Você percebeu um SINAL. Qual é a coragem do apoio?",
            opt1Label: "Não se intrometer. 'Ele vai falar se precisar.'",
            opt1Action: { message: "Você deixou o medo vencer. O ciclo no outro continua. Lembre-se: Coragem também é estender a mão.", success: false },
            opt2Label: "Perguntar com empatia: 'Tudo bem? Estou aqui.'",
            opt2Action: { message: "A empatia é a chave! Você quebrou o ciclo do isolamento por ele. O primeiro passo é a escuta.", success: true }
        },
        {
            text: "Seu colega de trabalho está visivelmente irritado e cometeu erros. Você suspeita do Ciclo. O que fazer?",
            opt1Label: "Ignorar e focar apenas no seu trabalho.",
            opt1Action: { message: "Você não agiu. O colega pode estar sobrecarregado. Sua coragem de se aproximar faz a diferença.", success: false },
            opt2Label: "Sugira que ele tire uma pausa e ofereça apoio para conversar com o RH/chefe.",
            opt2Action: { message: "Apoio prático e respeitoso. Você validou o sofrimento dele e indicou um caminho. Isso é coragem.", success: true }
        }
    ];

    function showPhase2Screen() {
        $gameplayScreen.classList.add('hidden');
        $eventArea.classList.remove('hidden'); // Reutiliza a área de evento para a Fase 2

        const event = phase2Events[Math.floor(Math.random() * phase2Events.length)];
        
        $countdown.textContent = "REFLEXÃO FINAL: O SINAL NO OUTRO";
        $eventText.textContent = event.text;
        $opt1Btn.textContent = event.opt1Label;
        $opt2Btn.textContent = event.opt2Label;

        // Configura os ouvintes para a Fase 2, que levam diretamente ao resultado final
        $opt1Btn.onclick = () => showFinalResult(event.opt1Action);
        $opt2Btn.onclick = () => showFinalResult(event.opt2Action);
    }

    function showFinalResult(action) {
        let finalTitle = "";
        let finalMessage = "";
        let finalCoragemScore = coragemScore + (action.success ? 3 : 0); // Adiciona +3 por um final corajoso

        $eventArea.classList.add('hidden');

        // Lógica de Resultado Pós-Fase 2 (Reflexão Total)
        if (finalCoragemScore >= 8) { // Alto score total
            finalTitle = "VITÓRIA: CORAGEM PLENA E EMPATIA ATIVA.";
            finalMessage = `Você demonstrou coragem por si mesmo (pontuação na Fase 1: ${coragemScore}) e agiu com empatia pelo próximo. Quebrar o ciclo requer auto-cuidado E estender a mão. Leve essa lição para sua rotina.`;
        } else if (finalCoragemScore >= 5) { // Score médio
            finalTitle = "DESPERTAR: VOCÊ RECONHECEU OS SINAIS.";
            finalMessage = `Você começou a colocar limites, mas ainda hesitou em alguns momentos ou ao ajudar o próximo. A vulnerabilidade é uma força. Continue cultivando a coragem de pedir e oferecer ajuda.`;
        } else { // Score baixo
            finalTitle = "ALERTA: O RISCO DO SILÊNCIO CONTINUA.";
            finalMessage = `Você evitou o colapso por pouco, mas as escolhas de sacrifício e isolamento prevaleceram. O medo da vergonha é real. Sua missão agora é encontrar a coragem de pedir ajuda e não hesitar em oferecer suporte.`;
        }
        
        // Inclui a mensagem específica da Fase 2 (Ato de Coragem) no final
        finalMessage += `<br><br><strong>Ato de Coragem:</strong> ${action.message}`;

        showResultScreen(finalTitle, finalMessage, true);
    }


    function showResultScreen(title, message, showRestart) {
        $gameplayScreen.classList.add('hidden');
        $eventArea.classList.add('hidden');
        $resultScreen.classList.remove('hidden');

        $resultTitle.textContent = title;
        $resultMessage.innerHTML = message; // Usando innerHTML para aceitar as tags <br> e <strong>

        // Esconde/Mostra o botão de reiniciar
        document.getElementById('restart-btn').style.display = showRestart ? 'block' : 'none';
    }

    // --- INICIALIZAÇÃO ---
    $startBtn.addEventListener('click', startGame);
    $restartBtn.addEventListener('click', startGame);

    updateBars();
</script>
<script src="bootstrap-5.3.8-dist/js/bootstrap.bundle.js"></script>
</body>

</html>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAS: Jogo</title>
    <link rel="shortcut icon" href="imgs/favicon.png" type="image/x-icon">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Emblema+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Buenard:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="CssExterno/site-da-feira-tecnologica-do-0/style.css">
    <link rel="stylesheet" href="bootstrap-5.3.8-dist/css/bootstrap.css">
    
    <style>
        :root {
            --lilac: #9599E6;
            --lilac-dark: #6e71a9;
            --dark-purple: #23252F;
            --light: #fffdf6;
        }

        /* Utilidades Bootstrap personalizadas */
        .bg-lilac { background-color: var(--lilac) !important; }
        .bg-dark-purple { background-color: var(--dark-purple) !important; }
        .border-lilac { border-color: var(--lilac) !important; }
        .text-lilac { color: var(--lilac) !important; }

        /* Botões personalizados */
        .btn-lilac {
            background-color: var(--lilac);
            border-color: var(--lilac);
            color: var(--dark-purple);
            transition: all 0.3s ease;
        }
        
        .btn-lilac:hover {
            background-color: var(--lilac-dark);
            border-color: var(--lilac-dark);
            color: var(--light);
            transform: translateY(-2px);
        }

        .btn-outline-lilac {
            color: var(--lilac);
            border-color: var(--lilac);
            background-color: transparent;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 10px;
            text-align: left;
            white-space: normal;
            min-height: 60px;
        }

        .btn-outline-lilac:hover {
            background-color: var(--lilac);
            color: var(--dark-purple);
            transform: translateY(-2px);
        }

        /* Componentes do jogo */
        #game-container {
            width: 90%;
            max-width: 600px;
            margin: 50px auto;
            padding: 2rem;
            background: rgba(35, 37, 47, 0.95);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(149, 153, 230, 0.15);
        }

        .titulo {
            font-family: "Emblema One", system-ui;
            color: var(--lilac);
            font-size: 2em;
            margin-bottom: 1.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        #countdown {
            font-size: 1.25rem;
            font-weight: bold;
        }

        .event-card {
            background: rgba(45, 47, 57, 0.95);
            border: 1px solid rgba(149, 153, 230, 0.2);
            transition: all 0.3s ease;
        }

        .event-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(149, 153, 230, 0.1);
        }

        #event-text {
            font-size: 1.2rem;
            line-height: 1.6;
        }

        .progress {
            height: 8px;
            background-color: rgba(149, 153, 230, 0.1);
        }

        .progress-bar {
            transition: width 0.3s ease;
        }

        .hidden {
            display: none !important;
        }

        /* Animações */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fadeIn {
            animation: fadeIn 0.5s ease-out;
        }

        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        /* Responsividade e Menu Mobile */
        @media (max-width: 768px) {
            #game-container {
                width: 98%;
                margin: 80px auto 20px;
                padding: 1.5rem;
            }

            .titulo {
                font-size: 1.5em;
            }

            #event-text {
                font-size: 1rem;
            }

            .btn {
                padding: 0.8rem;
                font-size: 0.9rem;
                white-space: normal;
                height: auto;
                min-height: 44px;
            }

            .nav-desktop {
                display: none;
            }

            #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            /* fica atrás de todo o conteúdo */
            overflow: hidden;
        }
            .nav-mobile {
                display: none;
                position: fixed;
                top: 70px;
                left: 0;
                width: 100%;
                background-color: rgba(35, 37, 47, 0.98);
                flex-direction: column;
                padding: 1rem 0;
                z-index: 998;
            }

            .nav-mobile.active {
                display: flex;
            }

            .nav-mobile a {
                padding: 1rem 2rem;
                width: 100%;
                text-align: left;
                border-bottom: 1px solid rgba(149, 153, 230, 0.1);
            }

            .hamburger {
                display: flex;
                flex-direction: column;
                justify-content: space-between;
                width: 30px;
                height: 20px;
                background: none;
                border: none;
                cursor: pointer;
                padding: 0;
                z-index: 999;
            }

            .hamburger span {
                width: 100%;
                height: 2px;
                background-color: var(--light);
                transition: all 0.3s ease;
            }

            .hamburger.active span:nth-child(1) {
                transform: rotate(45deg) translate(5px, 5px);
            }

            .hamburger.active span:nth-child(2) {
                opacity: 0;
            }

            .hamburger.active span:nth-child(3) {
                transform: rotate(-45deg) translate(7px, -7px);
            }

            .options-grid {
                grid-template-columns: 1fr !important;
            }
        }

        /* Header e Nav */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #23252F;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            z-index: 999;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }

        .logo {
            width: auto;
            cursor: pointer;
            transition: color 0.3s;
            padding: 5%;
            height: 60px;
        }

        nav {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        nav a {
            text-decoration: none;
            color: #fffdf6;
            font-weight: 500;
            font-size: 0.95em;
            position: relative;
            transition: color 0.3s;
            padding-bottom: 5px;
            font-family: "Buenard", serif;
            font-optical-sizing: auto;
            font-weight: 800;
            font-style: normal;
        }

        nav a:hover {
            color: #9599E6;
        }

        nav a.active {
            color: #6e71a9;
            border-bottom: 3px solid #6e71a9;
        }

        /* Footer */
        footer {
            background-color: #23252F;
            padding: 40px 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            color: #fffdf6;
            margin-top: 50px;
        }

        footer h4 {
            color: #9599E6;
            margin-bottom: 20px;
            font-family: "Emblema One", system-ui;
        }

        footer ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        footer li, .nav-footer {
            margin-bottom: 10px;
            color: #fffdf6;
            font-family: "Buenard", serif;
        }

        .copyright {
            background-color: #1a1b22;
            color: #fffdf6;
            text-align: center;
            padding: 15px;
            font-family: "Buenard", serif;
        }
    </style>
</head>
<body>
    <div id="particles-js"></div>
    
    <header>
        <a href="index.html" id="logo"><img class="logo" src="imgs/logoCAS.png" alt=""></a>
        <nav class="nav-desktop">
            <a href="index.html" class="nav-link text-white">Home</a>
            <a href="aprofundamento.html#aprof" class="nav-link text-white">Aprofunde</a>
            <a href="rename.html#consc" class="nav-link text-white">Conscientização</a>
            <a href="timeline.html#tm" class="nav-link text-white">Timeline</a>
            <a href="formulário.html#desab" class="nav-link text-white">Desabafe</a>
            <a href="Jogo.html#gojo" class="nav-link active text-white">Jogo</a>
            <a href="contato.html#ctt" class="nav-link text-white">Contato</a>
        </nav>
        <button class="hamburger d-md-none" type="button" aria-label="Menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </header>
    
    <nav class="nav-mobile">
        <a href="index.html" class="nav-link text-white">Home</a>
        <a href="aprofundamento.html#aprof" class="nav-link text-white">Aprofunde</a>
        <a href="rename.html#consc" class="nav-link text-white">Conscientização</a>
        <a href="timeline.html#tm" class="nav-link text-white">Timeline</a>
        <a href="formulário.html#desab" class="nav-link text-white">Desabafe</a>
        <a href="Jogo.html#gojo" class="nav-link active text-white">Jogo</a>
        <a href="contato.html#ctt" class="nav-link text-white">Contato</a>
    </nav>

    <main>
        <section class="banner img-fluid img-responsive" id="home">
            <img class="banner img-fluid img-responsive" src="imgs/BannerCAS.png" alt="">
        </section>
        
        <section id="gojo">
            <div class="areaJogo">
                <div id="game-container" class="mb-5">
                    <div id="start-screen" class="fadeIn">
                        <h1 class="titulo mt-4">O SINAL: O Despertar</h1>
                        <p class="text-light mb-4">Navegue por situações do dia a dia e faça escolhas conscientes. 
                            Você tem 15 segundos para cada decisão. Suas escolhas moldam seu bem-estar.</p>
                        <button id="start-btn" class="btn btn-lilac btn-lg w-100">INICIAR JORNADA</button>
                    </div>
      
                    <div id="gameplay-screen" class="hidden fadeIn">
                        <div class="progress mb-4">
                            <div id="progress-bar" class="progress-bar bg-lilac" style="width: 0%"></div>
                        </div>
                        
                        <div id="countdown" class="badge bg-lilac p-3 mb-4">Tempo: 15s</div>

                        <div id="event-area" class="card bg-dark-purple border-lilac">
                            <div class="card-body">
                                <p id="event-text" class="card-text text-light mb-4"></p>
                                <div class="options-grid">
                                    <button class="btn btn-outline-lilac option-btn" data-value="0"></button>
                                    <button class="btn btn-outline-lilac option-btn" data-value="1"></button>
                                    <button class="btn btn-outline-lilac option-btn" data-value="2"></button>
                                    <button class="btn btn-outline-lilac option-btn" data-value="3"></button>
                                </div>
                            </div>
                        </div>

                        <div id="success-message" class="alert alert-success mt-4 hidden">
                            <i class="bi bi-check-circle-fill me-2"></i>
                            <strong>Ótimo progresso!</strong> Continue fazendo escolhas conscientes.
                        </div>
                    </div>

                    <div id="result-screen" class="hidden fadeIn">
                        <h1 id="result-title" class="titulo mb-4"></h1>
                        <div class="card bg-dark-purple border-lilac mb-4">
                            <div class="card-body">
                                <p id="result-message" class="text-light"></p>
                            </div>
                        </div>
                        <div class="cta-area">
                            <a href="rename.html#consc" class="btn btn-lilac w-100 mb-3">Aprender mais sobre autocuidado</a>
                            <p class="text-lilac small">Se precisar de ajuda real, ligue para o CVV: 188</p>
                        </div>
                        <button id="restart-btn" class="btn btn-lilac mt-3">TENTAR NOVAMENTE</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div>
            <h4>CAS</h4>
            <p class="nav-footer">Um projeto desenvolvido para a Feira Tecnológica, promovendo reflexão e empatia.</p>
        </div>
        <div>
            <h4>Navegação</h4>
            <a href="index.html" class="nav-link nav-footer text-white" data-page="1">Home</a>
            <a href="aprofundamento.html#aprof" class="nav-link nav-footer text-white" data-page="2">Aprofunde</a>
            <a href="rename.html#consc" class="nav-link nav-footer text-white" data-page="3">Conscientização</a>
            <a href="timeline.html#tm" class="nav-link nav-footer text-white" data-page="4">Timeline</a>
            <a href="formulário.html#desab" class="nav-link nav-footer text-white" data-page="5">Desabafe</a>
            <a href="Jogo.html#gojo" class="nav-link nav-footer active text-white" data-page="6">Jogo</a>
            <a href="contato.html#ctt" class="nav-link nav-footer text-white" data-page="7">Contato</a>
        </div>
        <div>
            <h4>Projeto</h4>
            <ul>
                <li class="nav-footer">Desenvolvido por alunos do curso técnico</li>
                <li class="nav-footer">Inspirado na temática da autodestruição silenciosa</li>
            </ul>
        </div>
        <div>
            <h4>Integrantes</h4>
            <ul>
                <li class="nav-footer">Arthur Franco</li>
                <li class="nav-footer">Arthur Gomes</li>
                <li>Arthur Pereira</li>
                <li class="nav-footer">Bruno Ferreira</li>
                <li class="nav-footer">João Pedro</li>
            </ul>
        </div>
    </footer>

    <div class="copyright">
        © 2025 - Projeto C.A.S. | Todos os direitos reservados.
    </div>
<script>
        particlesJS("particles-js", {
            "particles": {
                "number": { "value": 120 },
                "color": { "value": "000000" },
                "shape": {
                    "type": "triangle",
                    "stroke": {
                        "width": 7,
                        "color": "#9599E6"
                    }
                },
                "opacity": {
                    "value": 0.8,
                    "random": true
                },
                "size": {
                    "value": 6,
                    "random": true
                },
                "move": {
                    "enable": true,
                    "speed": 1.2,
                    "direction": "none",
                    "random": true,
                    "straight": false,
                    "out_mode": "out",
                    "attract": {
                        "enable": true
                    }
                },
                "line_linked": {
                    "enable": true
                }
            },
            "interactivity": {
                "detect_on": "canvas",
                "events": {
                    "onhover": { "enable": true, "mode": "repulse" },
                    "onclick": { "enable": false }
                },
                "modes": {
                    "repulse": { "distance": 100, "duration": 1 }
                }
            },
            "retina_detect": true
        });
    </script>
    <script>
        // Configurações do jogo
        const TOTAL_QUESTOES = 6;
        const TEMPO_POR_QUESTAO = 15;
        
        // Estado do jogo
        let questaoAtual = 0;
        let tempoRestante = TEMPO_POR_QUESTAO;
        let coragemScore = 0;
        let gameInterval;
        let gameRunning = false;

        // Elementos do DOM
        const $startScreen = document.getElementById('start-screen');
        const $gameplayScreen = document.getElementById('gameplay-screen');
        const $resultScreen = document.getElementById('result-screen');
        const $startBtn = document.getElementById('start-btn');
        const $restartBtn = document.getElementById('restart-btn');
        const $countdown = document.getElementById('countdown');
        const $eventArea = document.getElementById('event-area');
        const $eventText = document.getElementById('event-text');
        const $opt1Btn = document.getElementById('opt1-btn');
        const $opt2Btn = document.getElementById('opt2-btn');
        const $progressBar = document.getElementById('progress-bar');
        const $successMessage = document.getElementById('success-message');

        // Adiciona manipulação do menu mobile
        const hamburger = document.querySelector('.hamburger');
        const navMobile = document.querySelector('.nav-mobile');

        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            navMobile.classList.toggle('active');
        });

        // Fecha o menu ao clicar em um link
        document.querySelectorAll('.nav-mobile .nav-link').forEach(link => {
            link.addEventListener('click', () => {
                hamburger.classList.remove('active');
                navMobile.classList.remove('active');
            });
        });

        // Lista de eventos do jogo
        const events = [
            {
                text: "São 2 da manhã e você ainda está envolvido(a) em um projeto.",
                options: [
                    { label: "Tomar mais um café e continuar", score: 0 },
                    { label: "Definir mais 30 minutos e parar", score: 1 },
                    { label: "Salvar o progresso e descansar", score: 2 },
                    { label: "Estabelecer um horário fixo para dormir", score: 3 }
                ]
            },
            {
                text: "Durante uma reunião online, você se sente exausto(a).",
                options: [
                    { label: "Desligar a câmera e continuar multitarefas", score: 0 },
                    { label: "Anotar os pontos importantes para focar", score: 1 },
                    { label: "Sugerir uma pausa de 5 minutos", score: 2 },
                    { label: "Propor reuniões mais curtas e objetivas", score: 3 }
                ]
            },
            {
                text: "Seu feed está cheio de pessoas alcançando grandes objetivos.",
                options: [
                    { label: "Scrollar mais para ver outros sucessos", score: 0 },
                    { label: "Fazer uma lista dos seus objetivos", score: 1 },
                    { label: "Limitar o tempo nas redes sociais", score: 2 },
                    { label: "Focar no seu próprio ritmo e progresso", score: 3 }
                ]
            },
            {
                text: "Você percebe que não tem feito pausas para almoço adequadas.",
                options: [
                    { label: "Comer rápido na frente do computador", score: 0 },
                    { label: "Separar 20 minutos para a refeição", score: 1 },
                    { label: "Criar um horário fixo de almoço", score: 2 },
                    { label: "Estabelecer pausas nutritivas completas", score: 3 }
                ]
            },
            {
                text: "Um colega pede ajuda quando você já está sobrecarregado(a).",
                options: [
                    { label: "Aceitar e acrescentar à sua lista", score: 0 },
                    { label: "Sugerir ajudar em outro momento", score: 1 },
                    { label: "Explicar suas limitações atuais", score: 2 },
                    { label: "Propor alternativas e recursos disponíveis", score: 3 }
                ]
            },
            {
                text: "Você nota tensão constante em seus ombros e pescoço.",
                options: [
                    { label: "Ignorar e continuar trabalhando", score: 0 },
                    { label: "Fazer alongamentos básicos", score: 1 },
                    { label: "Ajustar sua postura e ambiente", score: 2 },
                    { label: "Criar rotina de exercícios preventivos", score: 3 }
                ]
            },
            {
                text: "Seu tempo pessoal está sendo consumido por demandas externas.",
                options: [
                    { label: "Sacrificar sono para ter tempo livre", score: 0 },
                    { label: "Tentar encaixar momentos de pausa", score: 1 },
                    { label: "Definir horários para cada atividade", score: 2 },
                    { label: "Reavaliar compromissos e prioridades", score: 3 }
                ]
            },
            {
                text: "Você percebe pensamentos negativos frequentes sobre si mesmo(a).",
                options: [
                    { label: "Ignorar e focar nas tarefas", score: 0 },
                    { label: "Fazer algo que goste para distrair", score: 1 },
                    { label: "Praticar exercícios de respiração", score: 2 },
                    { label: "Buscar apoio profissional adequado", score: 3 }
                ]
            }
        ];

        let eventsPool = [...events];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startGame() {
            questaoAtual = 0;
            coragemScore = 0;
            tempoRestante = TEMPO_POR_QUESTAO;
            gameRunning = true;
            eventsPool = shuffleArray([...events]);

            $startScreen.classList.add('hidden');
            $resultScreen.classList.add('hidden');
            $gameplayScreen.classList.remove('hidden');
            $successMessage.classList.add('hidden');
            
            updateProgressBar();
            loadNewEvent();
            startTimer();
        }

        function updateProgressBar() {
            const progress = (questaoAtual / TOTAL_QUESTOES) * 100;
            $progressBar.style.width = `${progress}%`;
        }

        function startTimer() {
            clearInterval(gameInterval);
            gameInterval = setInterval(() => {
                tempoRestante--;
                $countdown.textContent = `Tempo: ${tempoRestante}s`;

                if (tempoRestante <= 0) {
                    handleTimeUp();
                }
            }, 1000);
        }

        function loadNewEvent() {
            if (questaoAtual < TOTAL_QUESTOES) {
                const event = eventsPool[questaoAtual];
                $eventText.textContent = event.text;

                const optionsContainer = document.querySelector('.options-grid');
                const options = [...event.options];
                // Embaralha as opções para não ficarem em ordem crescente de score
                shuffleArray(options);
                
                const optionButtons = optionsContainer.querySelectorAll('.option-btn');
                optionButtons.forEach((button, index) => {
                    button.textContent = options[index].label;
                    button.dataset.score = options[index].score;
                    button.onclick = () => handleChoice(parseInt(options[index].score));
                });

                tempoRestante = TEMPO_POR_QUESTAO;
                $countdown.textContent = `Tempo: ${tempoRestante}s`;
                startTimer();
            }
        }

        function handleChoice(score) {
    if (!gameRunning) return;

    coragemScore += score; // Agora usando diretamente o score passado
    questaoAtual++;
    updateProgressBar();

    if (questaoAtual >= TOTAL_QUESTOES) {
        finishGame();
    } else {
        loadNewEvent();
    }
}

        function handleTimeUp() {
            if (gameRunning) {
                questaoAtual++;
                updateProgressBar();
                
                if (questaoAtual >= TOTAL_QUESTOES) {
                    finishGame();
                } else {
                    loadNewEvent();
                }
            }
        }

        function finishGame() {
    gameRunning = false;
    clearInterval(gameInterval);

    // Calculando a pontuação máxima possível (3 pontos x número de questões)
    const pontuacaoMaxima = TOTAL_QUESTOES * 3;
    
    // Calculando a taxa de sucesso baseada na pontuação máxima possível
    const sucessoRate = (coragemScore / pontuacaoMaxima) * 100;
    
    // Calculando o número de escolhas positivas (considerando que cada questão vale até 3 pontos)
    const escolhasPositivas = Math.round(coragemScore / 3);

    if (sucessoRate >= 70) {
        $successMessage.classList.remove('hidden');
        showResultScreen(
            "EXCELENTE JORNADA!",
            `Você demonstrou sabedoria em ${escolhasPositivas} de ${TOTAL_QUESTOES} situações. 
            Suas escolhas refletem um compromisso com seu bem-estar. Continue cultivando 
            esse equilíbrio entre responsabilidades e autocuidado.`
        );
    } else if (sucessoRate >= 50) {
        showResultScreen(
            "BOA EVOLUÇÃO!",
            `Você fez escolhas conscientes em ${escolhasPositivas} de ${TOTAL_QUESTOES} situações. 
            Está no caminho certo, mas ainda pode fortalecer seus limites e priorizar mais 
            seu bem-estar.`
        );
    } else {
        showResultScreen(
            "MOMENTO DE REFLEXÃO",
            `Você precisa priorizar mais seu bem-estar em ${TOTAL_QUESTOES - escolhasPositivas} de ${TOTAL_QUESTOES} situações. 
            Lembre-se: cuidar de si não é egoísmo, é uma necessidade. Que tal começar 
            com pequenas mudanças hoje?`
        );
    }
}

        function showResultScreen(title, message) {
            $gameplayScreen.classList.add('hidden');
            $resultScreen.classList.remove('hidden');
            
            document.getElementById('result-title').textContent = title;
            document.getElementById('result-message').textContent = message;
            $restartBtn.style.display = 'block';
        }

        // Event Listeners
        $startBtn.addEventListener('click', startGame);
        $restartBtn.addEventListener('click', startGame);
</script>
    
    
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="bootstrap-5.3.8-dist/js/bootstrap.bundle.js"></script>
</body>
</html>